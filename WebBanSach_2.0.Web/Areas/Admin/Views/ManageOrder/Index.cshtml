
@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Admin/Views/Shared/_adminLayout.cshtml";

    var orderList = (WebBanSach_2_0.Web.Infrastructure.Pagination.IndexViewModel<WebBanSach_2_0.Web.Models.OrderVM>)ViewBag.OrderModel;
}

<ol class="breadcrumb">
    <li class="breadcrumb-item">
        <a href="@Url.Action("Index","Dashboard")">Trang chủ</a>
    </li>
    <li class="breadcrumb-item">Quản lý</li>
    <li class="breadcrumb-item active">Hóa đơn</li>
</ol>

<div class="card mb-3">
    <div class="card-header">
        <i class="fas fa-table"></i>
        Quản lý hóa đơn
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-sm-8 col-md-4">
            </div>

            <div class="col-sm-8 col-md-4">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Tìm kiếm</span>
                    </div>
                    <input type="text" class="form-control" id="searchDetail">
                </div>
            </div>
        </div>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Khách hàng</th>
                    <th>Địa chỉ</th>
                    <th>SĐT</th>
                    <th>Ngày đặt</th>
                    <th>Hình thức</th>
                    <th>Trạng thái</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in orderList.Items)
                {
                <tr>
                    <td>@item.CustomerName</td>
                    <td>@item.CustomerAddress</td>
                    <td>@item.CustomerMobile</td>
                    <td>@item.CreatedDate</td>
                    <td>@item.PaymentMethod</td>
                    <td class="item-status">
                        @switch (item.Status)
                        {
                            case 1:<span>Đang giao hàng</span>; break;
                            case 2: <span class="text-success">Đã hoàn thành</span>; break;
                            default: <span class="text-danger">Đã hủy</span>;
                                break;
                        }
                    </td>
                    <td>
                        <button type="button" class="btn btn-outline-success btn-order-completed btn-sm" data-status="2" data-id="@item.ID">
                            <i class="fas fa-check-circle"></i>
                        </button>
                        <button type="button" class="btn btn-outline-primary btn-order-detail btn-sm" data-id="@item.ID">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button type="button" class="btn btn-outline-danger btn-order-canceled btn-sm" data-status="0" data-id="@item.ID">
                            <i class="fas fa-times-circle"></i>
                        </button>
                    </td>
                </tr>
                }
            </tbody>
        </table>
        <ul class="pagination" id="paged">
            @if (orderList.Pager.CurrentPage > 1)
            {
                <li class="page-item"><a class="page-link" href="@Url.Action("Index",new { @page = 1 })">First</a></li>
                <li class="page-item"><a class="page-link" href="@Url.Action("Index",new { @page = orderList.Pager.CurrentPage - 1 })"> Previous</a></li>
            }
            @for (int i = orderList.Pager.StartPage; i <= orderList.Pager.EndPage; i++)
            {
                if (i == orderList.Pager.CurrentPage)
                {
                    <li class="page-item active"><a class="page-link" href="@Url.Action("Index",new { @page = @i })">@i</a></li>
                }
                else
                {
                    <li class="page-item"><a class="page-link" href="@Url.Action("Index",new { @page = @i })">@i</a></li>
                }
            }
            @if (orderList.Pager.CurrentPage < orderList.Pager.TotalPages)
            {
                <li class="page-item"><a class="page-link" href="@Url.Action("Index",new { @page = orderList.Pager.CurrentPage + 1 })"> Next</a></li>
                <li class="page-item"><a class="page-link" href="@Url.Action("Index",new { @page = orderList.Pager.TotalPages })"> Last</a></li>
            }
        </ul>

    </div>
</div>

<!-- The Modal -->
<div class="modal fade" id="order-detail-modal">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header">
                <h4 class="modal-title">Chi tiết hóa đơn</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th scope="col"> </th>
                                <th scope="col">Sản phẩm</th>
                                <th scope="col">Giá bán</th>
                                <th scope="col" class="text-center">Số lượng</th>
                                <th scope="col" class="text-right">Đơn giá</th>
                                <th> </th>
                            </tr>
                        </thead>
                        <tbody id="order-detail-dataTable">
                            <tr>
                                <td><img src="" style="width:100px;height:auto" /> </td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td class="text-right">vnđ</td>
                            </tr>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>

                        </tbody>
                    </table>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>

        </div>
    </div>
</div>


@section scripts {
    @Scripts.Render("~/bundles/admin/extensions/order-admin")
}
